(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports={headerLink:"reviewCard_headerLink__u9v26",scoreLine:"reviewCard_scoreLine__2KKw5",scoreHeader:"reviewCard_scoreHeader__7LpYT",note:"reviewCard_note__1LEls",dateTime:"reviewCard_dateTime__1ma8k",reviewCard:"reviewCard_reviewCard__2zs_z",borderTop:"reviewCard_borderTop__2klAM",updateButton:"reviewCard_updateButton__1NvDo",comments:"reviewCard_comments__11sFi",addCommentButton:"reviewCard_addCommentButton__cPSfR",avatar:"reviewCard_avatar__3QAUx",commentText:"reviewCard_commentText__22-P3",commentWell:"reviewCard_commentWell__3Ixw6"}},141:function(e,t,a){e.exports={recentReviews:"review_recentReviews__1kwFq",commentModal:"review_commentModal__30K4n",reviewWell:"review_reviewWell__3qEmo",commentsWell:"review_commentsWell__2CEDo",commentWell:"review_commentWell__35_tQ",addCommentButton:"review_addCommentButton__6ukft",recentComment:"review_recentComment__1zXMu",scoreLine:"review_scoreLine__3VWIA",scoreHeader:"review_scoreHeader__1zJLr",commentText:"review_commentText__3rhkg",dateTime:"review_dateTime__1q5IA"}},205:function(e,t,a){e.exports=a.p+"static/media/shiba.6225025d.jpg"},21:function(e,t,a){e.exports={addIcon:"photos_addIcon__1EQBW",uploadBtn:"photos_uploadBtn__3q-7t",uploadBtns:"photos_uploadBtns__2--kg",header:"photos_header__9eMhZ",info:"photos_info__BDPr5",column:"photos_column__1RMTP",image:"photos_image__2tcHA",largeImage:"photos_largeImage__163cz",outer:"photos_outer__2r9Z_",inner:"photos_inner__1hFkh",imageDescriptionArea:"photos_imageDescriptionArea__1wZ6h",noPhotosWell:"photos_noPhotosWell__YuxTk",svg:"photos_svg__2uGvb",avatar:"photos_avatar__2mtQE",imageInfoText:"photos_imageInfoText__2eyTF"}},293:function(e,t,a){e.exports={main:"app_main__3w4EL"}},299:function(e,t,a){e.exports={navBar:"navigation_navBar__1Esl4"}},304:function(e,t,a){e.exports={signInButton:"signIn_signInButton__3yczM",signin:"signIn_signin__w8HeZ",signInInput:"signIn_signInInput__3j6Do",inputStyle:"signIn_inputStyle__1yhJc",maskButton:"signIn_maskButton__28Zpr",error:"signIn_error__3uhLf",image:"signIn_image__1bxQH"}},307:function(e,t,a){e.exports={recentReviews:"addCommentModal_recentReviews__3Ofgd",commentModal:"addCommentModal_commentModal__1NwWu",reviewWell:"addCommentModal_reviewWell__230AY",commentsWell:"addCommentModal_commentsWell__28ULM",commentWell:"addCommentModal_commentWell__3bg2z",addCommentButton:"addCommentModal_addCommentButton__3On5x",recentComment:"addCommentModal_recentComment__2xeNX",scoreLine:"addCommentModal_scoreLine__NwxJQ",scoreHeader:"addCommentModal_scoreHeader__2l4JE",commentText:"addCommentModal_commentText__Mtp3-",dateTime:"addCommentModal_dateTime__3hzJs"}},31:function(e,t,a){e.exports={inline:"home_inline__3SD5Y",reviewInput:"home_reviewInput__3hBkv",submitButton:"home_submitButton__WeA4d",starRating:"home_starRating__Rg7ut",updateButton:"home_updateButton__2XC8A",addReview:"home_addReview__2gnuh",addReviewBody:"home_addReviewBody__26vDW",noReviewsWell:"home_noReviewsWell__2WJ6p",inputTop:"home_inputTop__1EHC7",textarea:"home_textarea__2WEpE",scoreLine:"home_scoreLine__1QQ1q",scoreHeader:"home_scoreHeader__3ikuv",scoreRow:"home_scoreRow__3tvgF",scoreReviewHeader:"home_scoreReviewHeader__3Wudz",inlineParent:"home_inlineParent__1MNuZ",reviewsList:"home_reviewsList__24BTn"}},312:function(e,t,a){e.exports=a(671)},317:function(e,t,a){},460:function(e,t,a){},462:function(e,t,a){},475:function(e,t,a){},483:function(e,t,a){},63:function(e,t,a){e.exports={header:"shops_header__2woi_",info:"shops_info__kR4c4",imageIcon:"shops_imageIcon__13U4W",svg:"shops_svg__2Kz8G"}},671:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(38),s=a.n(r);a(317),a(319),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(5),c=a(6),l=a(8),u=a(7),m=a(9),d=a(693),p=a(689),h=a(293),f=a.n(h),g=o.a.createContext(null),v=o.a.createContext(null),b=function(e){return function(t){return o.a.createElement(v.Consumer,null,function(a){return o.a.createElement(e,Object.assign({},t,{firebase:a}))})}},E=v,w=a(139),S=a.n(w),x=a(98),O=a.n(x),_=(a(398),a(399),a(400),"/myreviews"),C="/shops",y={apiKey:"AIzaSyDNo2aFc8Sb9piAtQkBgHLDwjVEYWe-2Ao",authDomain:"bobatier.firebaseapp.com",databaseURL:"https://bobatier.firebaseio.com",projectId:"bobatier",storageBucket:"bobatier.appspot.com",messagingSenderId:"435363068882"},j=function e(){var t=this;Object(i.a)(this,e),this.provider=new S.a.auth.GoogleAuthProvider,this.googleLogin=function(){console.log("1"),S.a.auth().signInWithRedirect(t.provider),console.log("2")},this.getRedirect=function(){},this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){t.auth1.signOut().then(function(){}).catch(function(e){})},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.bobaShopUserReview=function(e,a){return t.db.ref("bobaShopUserReviews/".concat(e,"/").concat(a))},this.bobaShopUserComment=function(e,a){return t.db.ref("bobaShopUserReviews/".concat(e,"/").concat(a,"/comments"))},this.userReview=function(e,a){return t.db.ref("users/".concat(e,"/reviews/").concat(a))},this.userReviewComment=function(e,a){return t.db.ref("users/".concat(e,"/reviews/").concat(a,"/comments"))},this.bobaShop=function(e){return t.db.ref("bobaShops/".concat(e))},this.location=function(e){return t.db.ref("locations/".concat(e))},this.userReviewLastVisit=function(e){return t.db.ref("users/".concat(e,"/reviewsLastVisit"))},this.bobaShopReviews=function(){return t.db.ref("bobaShopUserReviews")},this.bobaShopUserReviews=function(e){return t.db.ref("bobaShopUserReviews/".concat(e))},this.userReviews=function(e){return t.db.ref("users/".concat(e,"/reviews"))},this.users=function(){return t.db.ref("users")},this.bobaShops=function(){return t.db.ref("bobaShops")},this.locations=function(){return t.db.ref("locations")},this.reviewDateTimes=function(){return t.db.ref("reviewDateTimes")},this.bobaShopImages=function(e){return t.db.ref("bobaShops/".concat(e,"/images"))},this.bobaShopImage=function(e,a){return t.db.ref("bobaShops/".concat(e,"/images/").concat(a))},this.userImages=function(e){return t.db.ref("users/".concat(e,"/images"))},this.userImage=function(e,a){return t.db.ref("users/".concat(e,"/images/").concat(a))},this.images=function(){return t.db.ref("images")},this.image=function(e){return t.db.ref("images/".concat(e))},this.storageBobaShopImages=function(e){return t.storage.ref("bobaShops/".concat(e,"/images"))},this.storageBobaShopImage=function(e,a){return t.storage.ref("bobaShops/".concat(e,"/images/").concat(a))},O.a.initializeApp(y),this.auth1=S.a.auth(),this.auth=O.a.auth(),this.db=O.a.database(),this.storage=O.a.storage()},k=function(e){var t=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(l.a)(this,Object(u.a)(a).call(this,e))).state={authUser:null,role:null,username:null,avatar:null},t}return Object(m.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth1.onAuthStateChanged(function(t){console.log("bbbb",t),t?(e.setState({authUser:t}),e.props.firebase.user(t.uid).on("value",function(t){e.setState({role:t.val().role,username:t.val().username,avatar:t.val().avatar})})):e.setState({authUser:null,role:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return o.a.createElement(g.Provider,{value:this.state},o.a.createElement(e,this.props))}}]),a}(o.a.Component);return b(t)},U=a(694),R=a(80),I=function(e){return function(t){var a=function(a){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,a),Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth1.onAuthStateChanged(function(a){e(a)||t.props.history.push("/signin")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return o.a.createElement(g.Consumer,null,function(n){return e(n.authUser)?o.a.createElement(t,a.props):null})}}]),n}(o.a.Component);return Object(R.a)(U.a,b)(a)}},N=function(){return function(e){var t=function(t){function a(){return Object(i.a)(this,a),Object(l.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.listener=this.props.firebase.auth.onAuthStateChanged(function(e){e&&console.log(222,e)})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var t=this;return o.a.createElement(g.Consumer,null,function(){return o.a.createElement(e,t.props)})}}]),a}(o.a.Component);return Object(R.a)(U.a,b)(t)}},M=a(61),A=a(299),D=a.n(A),L=a(33),T=a(34),W=a(687),B=a(691),H=a(692),P=[["Reviews","/reviews"],["Members","/members"],["Shops",C],["Photos","/photos"],["My Reviews",_],["Admin","/admin"],["Test","/test"]],z=[["Home",_],["Reviews","/reviews"],["Shops",C],["Members","/members"],["Photos","/photos"]],F=[["Reviews","/reviews"],["Shops",C],["Members","/members"],["Photos","/photos"],["Sign In","/signin"]],V=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(g.Consumer,null,function(t){return"admin"===t.role?o.a.createElement(q,{menuItems:P,signedIn:!0,newReviewsCount:e.props.newReviewsCount}):t.authUser?o.a.createElement(q,{menuItems:z,signedIn:!0,newReviewsCount:e.props.newReviewsCount}):o.a.createElement(q,{menuItems:F,signedIn:!1,newReviewsCount:e.props.newReviewsCount})})}}]),t}(o.a.Component),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setNavExpanded=function(e){a.setState({navExpanded:e}),document.addEventListener("click",a.handleDocumentClick,!0)},a.closeNav=function(){a.setState({navExpanded:!1}),document.removeEventListener("click",a.handleDocumentClick,!0)},a.handleDocumentClick=function(e){var t=a._element;e.target===t||t.contains(e.target)||a.closeNav()},a.signOut=function(){a.closeNav(),a.props.firebase.doSignOut()},a.state={navExpanded:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=null;return this.props.signedIn&&(t=o.a.createElement(W.a,{variant:"outline-info",onClick:this.signOut},"Sign Out")),o.a.createElement("div",{ref:function(t){return e._element=t},className:D.a.navBar},o.a.createElement(B.a,{collapseOnSelect:!0,expand:"md",bg:"dark",variant:"dark",fixed:"top",onToggle:this.setNavExpanded,expanded:this.state.navExpanded},o.a.createElement(B.a.Brand,{onClick:this.closeNav,href:"#/"},"AAAA"),o.a.createElement(B.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),o.a.createElement(B.a.Collapse,{id:"responsive-navbar-nav"},o.a.createElement(H.a,{className:"mr-auto"},this.props.menuItems.map(function(e){var t=Object(M.a)(e,2),a=t[0],n=t[1];return o.a.createElement(H.a.Link,{href:"#"+n,key:a},a)})),t)))}}]),t}(o.a.Component),q=Object(U.a)(b(G)),Z=V,Q=a(47),J=a(71),K=a.n(J),X=a(688),Y=a(48),$=a(13);a(205);function ee(){var e=Object(Q.a)(["\n    display: block;\n    margin: 120px auto;\n    "]);return ee=function(){return e},e}var te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={reviews:{},grades:{},tierList:{},loading:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAllReviewList()}},{key:"getAllReviewList",value:function(){var e=this;this.props.firebase.bobaShopReviews().on("value",function(t){var a=t.val();a&&e.setState({reviews:a},function(){e.gradeReviews()})})}},{key:"gradeReviews",value:function(){var e=0,t=0,a=0,n=0,o=0,r=0,s=0,i=0,c=0,l=0,u=0,m={};for(var d in this.state.reviews){for(var p in this.state.reviews[d]){var h=this.state.reviews[d][p];a+=h.score1,n+=h.score2,o+=h.score3,r+=h.score4,s+=h.score5,i+=h.score6,c+=h.score7,l+=h.score8,e++,u++}t=(parseFloat(a)+parseFloat(n)+parseFloat(o)+parseFloat(r)+parseFloat(s)+parseFloat(i)+parseFloat(c)+parseFloat(l))/(8*e),m[d]={shopName:d,finalScore:t,reviewCount:u},e=a=n=o=r=s=i=c=l=u=0}var f={};Object.keys(m).sort().forEach(function(e){f[e]=m[e]}),this.setState({grades:f});var g={S:[],A:[],B:[],C:[],D:[],E:[],F:[]};for(var v in m){var b=m[v].finalScore,E=m[v].shopName;b>=4.75?g.S.push(E):4.25<=b&&b<4.75?g.A.push(E):3.5<=b&&b<4.25?g.B.push(E):2.75<=b&&b<3.5?g.C.push(E):2<=b&&b<2.75?g.D.push(E):1.5<=b&&b<2?g.E.push(E):b<1.5&&g.F.push(E)}this.setState({tierList:g,loading:!1})}},{key:"componentWillUnmount",value:function(){this.props.firebase.bobaShopReviews().off()}},{key:"render",value:function(){var e=this.state.tierList,t={display:"inline"},a={padding:"3px"},n={color:"black",border:"1px solid #ccc"},r=Object($.css)(ee());return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 ".concat(K.a.header)},o.a.createElement("h5",null,"AAAA"))),o.a.createElement("div",{className:"".concat(K.a.tierList)},Object.entries(e).map(function(e){var r=Object(M.a)(e,2),s=r[0],i=r[1];return o.a.createElement("div",{key:s,style:a,className:"row ".concat(K.a.row)},o.a.createElement("div",{className:"col-2 col-md-1"},o.a.createElement("button",{className:"btn btn-default ".concat(K.a.tierLabel),style:n},s)),o.a.createElement("div",{className:"col-10 col-md-11"},i.map(function(e,a){return o.a.createElement("div",{key:a,style:t},o.a.createElement(X.a,{className:"".concat(K.a.tierItem),to:{pathname:C,state:{shop:e}}},e),", \xa0")})))}),o.a.createElement("div",{className:"sweet-loading"},o.a.createElement(Y.ClipLoader,{sizeUnit:"px",css:r,size:70,color:"#61aceb",loading:this.state.loading}))),o.a.createElement("div",null,o.a.createElement("div",null)))}}]),t}(o.a.Component),ae=b(te),ne=a(17),oe=a(10),re=a(206),se=a.n(re),ie=a(84),ce=a.n(ie),le={margin:"10px"},ue={username:"",email:"",passwordOne:"",error:null},me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,o=t.email,r=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(o,r).then(function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:o})}).then(function(){a.setState(Object(oe.a)({},ue)),a.props.history.push(_)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(ne.a)({},e.target.name,e.target.value))},a.state=Object(oe.a)({},ue),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,r=e.error,s=""===n||""===a||""===t;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Name",className:ce.a.inputStyle}),o.a.createElement("input",{name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address",className:ce.a.inputStyle}),o.a.createElement(se.a,{name:"passwordOne",placeholder:"Password",value:n,onChange:this.onChange,buttonClassName:ce.a.maskButton,inputClassName:ce.a.inputStyle}),o.a.createElement("button",{disabled:s,className:"btn btn-primary",type:"submit"},"Sign Up"),r&&o.a.createElement("p",{className:ce.a.error}," ",r.message," "))}}]),t}(n.Component),de=Object(U.a)(b(me)),pe=function(){return o.a.createElement("div",{style:le},o.a.createElement("h5",null," Sign Up "),o.a.createElement(de,null))},he=a(304),fe=a.n(he),ge={email:"",error:null},ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.doPasswordReset(t).then(function(){a.setState(Object(oe.a)({},ge))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(ne.a)({},e.target.name,e.target.value))},a.state=Object(oe.a)({},ge),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("input",{name:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),o.a.createElement("button",{disabled:n,type:"submit"},"Reset My Password"),a&&o.a.createElement("p",null,a.message))}}]),t}(n.Component),be=function(){return o.a.createElement("div",null,o.a.createElement("h5",null,"PasswordForget"),o.a.createElement(Ee,null))},Ee=b(ve),we=a(690),Se=a(306),xe=a.n(Se);function Oe(){var e=Object(Q.a)(["\n    display: block;\n    margin: 90px auto;"]);return Oe=function(){return e},e}var _e={width:80,height:80,marginTop:30,backgroundColor:"rgb(25,118,210)",color:"white"},Ce={email:"",password:"",error:null,loading:!1},ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){a.props.firebase.googleLogin()},a.onChange=function(e){a.setState(Object(ne.a)({},e.target.name,e.target.value))},a.state=Object(oe.a)({},Ce),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({loading:!0}),this.listener=this.props.firebase.auth1.onAuthStateChanged(function(t){t?(console.log("1111",t),e.props.firebase.user(t.uid).update({username:t.displayName,email:t.email,avatar:t.photoURL,role:"user"}).then(function(){e.props.history.push(_)})):e.setState({loading:!1})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.email,t.password,t.error,Object($.css)(Oe()));return o.a.createElement("div",{className:"container"},this.state.loading?o.a.createElement("div",{className:"sweet-loading",style:{marginTop:60}},o.a.createElement(Y.ClipLoader,{sizeUnit:"px",css:a,size:30,color:"#61aceb"})):o.a.createElement("div",{className:fe.a.signInButton},o.a.createElement(we.a,{style:_e,onClick:function(){return e.onSubmit()}},o.a.createElement(xe.a,{style:{width:"40px",height:"40px"}}))))}}]),t}(n.Component);ye.contextType=g;var je=Object(U.a)(b(ye)),ke=a(31),Ue=a.n(ke),Re=a(82),Ie=a.n(Re),Ne=(a(460),[]),Me=function(e){var t=e.trim().toLowerCase(),a=t.length;return 0===a?Ne:Ne.filter(function(e){return e.name.toLowerCase().slice(0,a)===t})},Ae=function(e){return e.name},De=function(e){return o.a.createElement("div",null,e.name)},Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n=t.newValue;a.setState({value:n}),a.props.getInputData(n)},a.onSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:Me(t)})},a.onSuggestionSelected=function(e,t){t.suggestion;var n=t.suggestionValue;t.suggestionIndex,t.sectionIndex,t.method;a.props.getSelectedData(n)},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.state={value:a.props.bobaShop,suggestions:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.firebase.bobaShops().on("value",function(e){var t=e.val();if(t){var a=Object.keys(t).map(function(e){return{name:e}});Ne=a}})}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.bobaShop})}},{key:"componentWillUnmount",value:function(){this.props.firebase.bobaShops().off()}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n={placeholder:this.props.placeholder?this.props.placeholder:"Enter Shop name",value:t,onChange:this.onChange};return o.a.createElement(Ie.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionSelected:this.onSuggestionSelected,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:Ae,renderSuggestion:De,inputProps:n,highlightFirstSuggestion:!0,alwaysRenderSuggestions:!0})}}]),t}(o.a.Component),Te=b(Le),We=(a(462),[]),Be=function(e){var t=e.trim().toLowerCase(),a=t.length;return 0===a?[]:We.filter(function(e){return e.name.toLowerCase().slice(0,a)===t})},He=function(e){return e.name},Pe=function(e){return o.a.createElement("div",null,e.name)},ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n=t.newValue;a.setState({value:n}),a.props.getInputData(n)},a.onSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:Be(t)})},a.onSuggestionSelected=function(e,t){t.suggestion;var n=t.suggestionValue;t.suggestionIndex,t.sectionIndex,t.method;a.props.getSelectedData(n)},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.state={value:a.props.location,suggestions:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.firebase.locations().on("value",function(e){var t=e.val();if(t){var a=Object.keys(t).map(function(e){return{name:e}});We=a}})}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.location})}},{key:"componentWillUnmount",value:function(){this.props.firebase.locations().off()}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n={placeholder:"Location name",value:t,onChange:this.onChange};return o.a.createElement(Ie.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionSelected:this.onSuggestionSelected,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:He,renderSuggestion:Pe,inputProps:n,highlightFirstSuggestion:!0})}}]),t}(o.a.Component),Fe=b(ze),Ve=a(41),Ge=a.n(Ve),qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleContainerClick=function(e){a.node.contains(e.target)||a.props.toggleModal()},a.onChange=function(e){a.setState(Object(ne.a)({},e.target.name,e.target.value))},a.onChangeScore=function(e,t){a.setState(Object(ne.a)({},t,e))},a.getAutosuggestShopInput=function(e){a.setState({bobaShop:e})},a.getAutoSuggestShopSelected=function(e){var t=e.substr(0,e.indexOf("(")-1),n=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")"));a.setState({bobaShop:t,location:n})},a.getAutosuggestLocationInput=function(e){a.setState({location:e})},a.getAutoSuggestLocationSelected=function(e){a.setState({location:e})},a.node=o.a.createRef(),a.state=e.formValues,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e.formValues);var t=e.formValues.bobaShop,a=t.substr(0,t.indexOf("(")-1),n=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")"));this.setState({bobaShop:a,location:n})}},{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=this.state,a=t.bobaShop,n=t.location,r=t.score1,s=t.score2,i=t.score3,c=t.score4,l=t.score5,u=t.score6,m=t.score7,d=t.score8,p=t.note,h=t.error,f=[r,s,i,c,l,u,m,d],g=["Drink Quality:","Sweet Boba:","Chewy Boba:","Customize:","Consistent:","Variety:","Price:","Overall:"],v=[],b=!0,E=!1,w=void 0;try{for(var S,x=f.entries()[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var O=S.value,_=Object(M.a)(O,2),C=_[0],y=_[1];v.push(o.a.createElement("div",{key:C,className:Ue.a.scoreRow},o.a.createElement("p",{className:"".concat(Ue.a.scoreReviewHeader)},g[C]),o.a.createElement("div",{className:"".concat(Ue.a.starRating)},o.a.createElement(Ge.a,{rating:y,starRatedColor:"#0099ff",starHoverColor:"#66ccff",changeRating:this.onChangeScore,numberOfStars:5,name:"score"+(C+1),starDimension:"20px",style:{padding:0}}))))}}catch(k){E=!0,w=k}finally{try{b||null==x.return||x.return()}finally{if(E)throw w}}var j=""===a||""===n||""===r||""===s||""===i||""===c||""===l||""===u||""===m||""===d;return o.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,minHeight:"800px",backgroundColor:"rgba(0,0,0,0.1)",padding:"40px 20px"},onClick:this.handleContainerClick},o.a.createElement("div",{ref:function(t){return e.node=t},className:"".concat(Ue.a.addReview)},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},"New Review"),o.a.createElement("button",{type:"button",className:"close",onClick:this.props.toggleModal,"aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:"modal-body ".concat(Ue.a.addReviewBody)},o.a.createElement(Te,{getInputData:this.getAutosuggestShopInput,getSelectedData:this.getAutoSuggestShopSelected,bobaShop:a}),o.a.createElement(Fe,{getInputData:this.getAutosuggestLocationInput,getSelectedData:this.getAutoSuggestLocationSelected,location:n}),v,o.a.createElement("textarea",{name:"note",value:p,onChange:this.onChange,type:"text",placeholder:"Note",className:"form-control ".concat(Ue.a.textarea)})),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{className:"btn btn-primary ".concat(Ue.a.submitButton),disabled:j,onClick:function(){return e.props.submitReview(e.state)}},"Add review"),h&&o.a.createElement("p",null,h.message)))))}}]),t}(o.a.Component),Ze=b(qe),Qe=a(307),Je=a.n(Qe),Ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleContainerClick=function(e){a.node.contains(e.target)||a.props.toggleCommentModal()},a.onChange=function(e){a.setState(Object(ne.a)({},e.target.name,e.target.value))},a.submitComment=function(){var e=a.props.commentModal,t=e.bobaShop,n=e.uid,o=e.contextUid,r=e.contextUsername,s=e.contextAvatar,i=a.state.comment;console.log(t,n,o,r,s);var c=new Date;c=c.toLocaleString(),a.props.firebase.bobaShopUserComment(t,n).push({comment:i,username:r,uid:o,avatar:s,dateTime:c}),a.props.firebase.userReviewComment(n,t).push({comment:i,username:r,uid:o,avatar:s,dateTime:c}).then(function(){a.props.toggleCommentModal()})},a.node=o.a.createRef(),a.state={comment:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=""===this.state.comment;return o.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.1)",padding:"40px 20px"},onClick:this.handleContainerClick},o.a.createElement("div",{className:Je.a.commentModal,ref:function(t){return e.node=t}},o.a.createElement("button",{type:"button",className:"close",onClick:this.props.toggleCommentModal,"aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7")),o.a.createElement("div",{style:{marginBottom:"10px"}},this.props.children),o.a.createElement("div",{className:"footer"},o.a.createElement("textarea",{autoFocus:!0,onChange:this.onChange,name:"comment",className:"form-control",rows:"3"}),o.a.createElement("div",{style:{paddingTop:"10px",float:"right"}},o.a.createElement("button",{className:"btn btn-success",disabled:t,onClick:this.submitComment},"Submit")))))}}]),t}(o.a.Component),Xe=b(Ke),Ye=a(12),$e=a.n(Ye),et=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t={fontWeight:"normal"},a=this.props.review;return o.a.createElement("div",{className:"".concat($e.a.reviewCard)},o.a.createElement("h4",null,o.a.createElement(X.a,{className:"".concat($e.a.headerLink),to:{pathname:C,state:{shop:a.bobaShop}}},a.bobaShop)," "," - "," ",o.a.createElement(X.a,{className:"".concat($e.a.headerLink),to:{pathname:"/members",state:{userid:a.userid,username:a.username}}},a.username)),o.a.createElement("div",{className:"row ".concat($e.a.borderTop)},o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Drink Quality"),o.a.createElement(Ge.a,{rating:a.score1,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"})),o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Sweet Boba"),o.a.createElement(Ge.a,{rating:a.score2,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"})),o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Chewy Boba"),o.a.createElement(Ge.a,{rating:a.score3,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"})),o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Customize"),o.a.createElement(Ge.a,{rating:a.score4,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"})),o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Consistent"),o.a.createElement(Ge.a,{rating:a.score5,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"})),o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Variety"),o.a.createElement(Ge.a,{rating:a.score6,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"})),o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Price"),o.a.createElement(Ge.a,{rating:a.score7,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"})),o.a.createElement("div",{className:"col-4 col-lg-3 ".concat($e.a.scoreLine)},o.a.createElement("p",{className:$e.a.scoreHeader},"Overall"),o.a.createElement(Ge.a,{rating:a.score8,starRatedColor:"#0099ff",starHoverColor:"#66ccff",numberOfStars:5,name:"score1",starDimension:"12px",starSpacing:"2px",isSelectable:"false"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-12 ".concat($e.a.note)},o.a.createElement("p",null,a.note))),this.props.isHomeCard?o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-info ".concat($e.a.updateButton),onClick:function(){return e.props.editReview(a)}},"Edit"),o.a.createElement("button",{className:"btn btn-danger ".concat($e.a.updateButton),onClick:function(){return e.props.deleteReview(a.bobaShop)}},"Delete")):o.a.createElement("div",null),o.a.createElement("div",{className:"".concat($e.a.comments)},a.comments?o.a.createElement("div",{className:"".concat($e.a.commentsWell)},a.comments.map(function(e,a){return o.a.createElement("div",{key:a,className:"".concat($e.a.commentWell)},o.a.createElement("img",{src:e.avatar,className:$e.a.avatar}),o.a.createElement("div",{className:"".concat($e.a.commentText)},o.a.createElement("p",null,e.username," ",o.a.createElement("span",{style:t},e.comment))))})):o.a.createElement("div",null),this.props.authUsername?o.a.createElement("button",{className:"btn btn-primary ".concat($e.a.addCommentButton),onClick:function(){return e.props.toggleCommentModal(a.bobaShop,a.userid,e.props.authUid,e.props.authUsername,e.props.authAvatar)}},o.a.createElement(L.a,{icon:T.c,className:"".concat($e.a.addIcon),size:"2x"})):o.a.createElement("div",null)))}}]),t}(n.Component),tt=a(209);a(468);function at(){var e=Object(Q.a)(["\n    display: block;\n    margin: 150px auto;"]);return at=function(){return e},e}var nt={bobaShop:"",username:"",location:"",score1:1,score2:1,score3:1,score4:1,score5:1,score6:1,score7:1,score8:1,note:"",error:null},ot=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleModal=function(){a.setState({modalIsOpen:!a.state.modalIsOpen})},a.toggleCommentModal=function(e,t,n,o,r){var s=Object(oe.a)({},a.state.commentModal);s.bobaShop=e,s.uid=t,s.contextUid=n,s.contextUsername=o,s.contextAvatar=r,s.isOpen=!s.isOpen,a.setState({commentModal:s})},a.newReview=function(){a.setState({formValues:nt},function(){a.toggleModal()})},a.editReview=function(e){e.score1=parseInt(e.score1),e.score2=parseInt(e.score2),e.score3=parseInt(e.score3),e.score4=parseInt(e.score4),e.score5=parseInt(e.score5),e.score6=parseInt(e.score6),e.score7=parseInt(e.score7),e.score8=parseInt(e.score8),a.setState({formValues:e}),a.toggleModal()},a.deleteReview=function(e){window.confirm("Are you sure you want to delete?")&&(a.props.firebase.userReviews(a.context.authUser.uid).child(e).remove(),a.props.firebase.bobaShopUserReviews(e).child(a.context.authUser.uid).remove())},a.submitReview=function(e){var t=e.score1,n=e.score2,o=e.score3,r=e.score4,s=e.score5,i=e.score6,c=e.score7,l=e.score8,u=e.note,m=e.bobaShop.trim(),d=e.location.trim(),p=m+" ("+d+")",h=(new Date).toLocaleString(),f=a.context.authUser.uid,g=a.context.username,v=a.context.avatar;a.props.firebase.userReview(f,p).once("value").then(function(e){e.val()||a.props.firebase.reviewDateTimes().push({dateTime:h}).catch(function(e){a.setState({error:e})})}),a.props.firebase.userReview(f,p).update({username:g,avatar:v,score1:t,score2:n,score3:o,score4:r,score5:s,score6:i,score7:c,score8:l,note:u,dateTime:h}).catch(function(e){a.setState({error:e})}),a.props.firebase.bobaShopUserReview(p,f).update({username:g,avatar:v,score1:t,score2:n,score3:o,score4:r,score5:s,score6:i,score7:c,score8:l,note:u,dateTime:h}).catch(function(e){a.setState({error:e})}),a.props.firebase.bobaShop(p).update({bobaShop:p}).catch(function(e){a.setState({error:e})}),a.props.firebase.location(d).update({location:d}).then(function(){a.setState({formValues:nt}),a.notify()}).catch(function(e){a.setState({error:e})}),a.toggleModal()},a.sortReviews=function(e){var t=[],n=function(a){var n=Object(oe.a)({},e[a]);n.comments&&(n.comments=Object.keys(n.comments).map(function(e){return Object(oe.a)({},n.comments[e])}),n.comments.sort(function(e,t){return new Date(e.dateTime)-new Date(t.dateTime)})),t.push(n)};for(var o in e)n(o);t.sort(function(e,t){return new Date(t.dateTime)-new Date(e.dateTime)}),a.setState({reviews:t})},a.notify=function(){return Object(tt.b)("Review added")},a.state={reviews:[],modalIsOpen:!1,loading:!0,formValues:nt,contextUid:"",contextUsername:"",contextAvatar:"",commentModal:{bobaShop:"",uid:"",contextUid:"",contextUsername:"",contextAvatar:"",isOpen:!1}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){null!=this.context.authUser&&this.setState({contextUid:this.context.authUser.uid,contextUsername:this.context.username,contextAvatar:this.context.avatar}),this.getReviewList()}},{key:"componentWillUnmount",value:function(){this.props.firebase.userReviews().off(),this.setState({contextUid:"",contextUsername:"",contextAvatar:""})}},{key:"getReviewList",value:function(){var e=this,t=this.context.authUser.uid;this.props.firebase.userReviews(t).on("value",function(a){var n=a.val();if(n){var o=Object.keys(n).map(function(e){return Object(oe.a)({bobaShop:e,userid:t},n[e])});e.sortReviews(o)}else e.setState({reviews:[]});e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.reviews,n=t.loading,r=t.contextUsername,s=t.contextUid,i=t.contextAvatar;console.log(a);var c=Object($.css)(at());return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:Ue.a.inlineParent},o.a.createElement("h5",{style:{marginLeft:"15px"}},"My Reviews"),o.a.createElement("button",{onClick:this.newReview,className:"btn btn-primary",style:{marginLeft:"20px"}},o.a.createElement(L.a,{icon:T.e,className:"".concat(Ue.a.addIcon),size:"1x"}))),o.a.createElement(tt.a,null),o.a.createElement("div",{className:"sweet-loading"},o.a.createElement(Y.ClipLoader,{sizeUnit:"px",css:c,size:70,color:"#61aceb",loading:this.state.loading})),o.a.createElement("div",{className:Ue.a.reviewsList},n||void 0!==a&&0!=a.length?o.a.createElement("ul",null,a.map(function(t){return o.a.createElement("li",{key:t.bobaShop,className:""},o.a.createElement(et,{isHomeCard:"true",editReview:e.editReview,deleteReview:e.deleteReview,toggleCommentModal:e.toggleCommentModal,authUsername:r,authUid:s,authAvatar:i,review:t}))})):o.a.createElement("div",{className:"".concat(Ue.a.noReviewsWell)},"No Reviews Added.")),o.a.createElement(Ze,{show:this.state.modalIsOpen,formValues:this.state.formValues,toggleModal:this.toggleModal,submitReview:this.submitReview}),o.a.createElement(Xe,{show:this.state.commentModal.isOpen,toggleCommentModal:this.toggleCommentModal,commentModal:this.state.commentModal},"Add a comment"))}}]),t}(o.a.Component);ot.contextType=g;var rt=b(I(function(e){return!!e})(ot)),st=a(141),it=a.n(st);function ct(){var e=Object(Q.a)(["\n            display: block;\n            margin: 150px auto;\n        "]);return ct=function(){return e},e}var lt=function(e){function t(e){var a,n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getAllReviewList=function(){n.props.firebase.bobaShopReviews().on("value",function(e){var t=e.val();t&&n.sortReviews(t),n.setState({loading:!1})})},n.sortReviews=function(e){var t=[];for(var a in e){var o=function(n){var o=Object(oe.a)({},e[a][n],{bobaShop:a,userid:n});o.comments&&(o.comments=Object.keys(o.comments).map(function(e){return Object(oe.a)({},o.comments[e],{uid:e})}),o.comments.sort(function(e,t){return new Date(e.dateTime)-new Date(t.dateTime)})),t.push(o)};for(var r in e[a])o(r)}t.sort(function(e,t){return new Date(t.dateTime)-new Date(e.dateTime)}),t=t.splice(0,25),n.setState({reviews:t})},n.toggleCommentModal=function(e,t,a,o,r){var s=Object(oe.a)({},n.state.commentModal);s.bobaShop=e,s.uid=t,s.contextUid=a,s.contextUsername=o,s.contextAvatar=r,s.isOpen=!s.isOpen,n.setState({commentModal:s})},n.state=(a={reviews:{}},Object(ne.a)(a,"reviews",[]),Object(ne.a)(a,"currentTime",new Date),Object(ne.a)(a,"loading",!0),Object(ne.a)(a,"contextUid",""),Object(ne.a)(a,"contextUsername",""),Object(ne.a)(a,"contextAvatar",""),Object(ne.a)(a,"commentModal",{bobaShop:"",uid:"",contextUid:"",contextUsername:"",contextAvatar:"",isOpen:!1}),a),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(11111,this.context),null!=this.context.authUser&&(this.setState({contextUid:this.context.authUser.uid,contextUsername:this.context.username,contextAvatar:this.context.avatar}),this.props.firebase.user(this.context.authUser.uid).update({reviewsLastVisit:(new Date).toLocaleString()})),this.getAllReviewList()}},{key:"componentWillUnmount",value:function(){this.props.firebase.bobaShopReviews().off()}},{key:"render",value:function(){var e=this,t=this.state,a=t.reviews,n=t.loading,r=t.contextUsername,s=t.contextUid,i=t.contextAvatar,c=Object($.css)(ct());return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12",style:{marginLeft:"12px"}},o.a.createElement("h4",null,"Recent Reviews"))),o.a.createElement("div",{className:"sweet-loading"},o.a.createElement(Y.ClipLoader,{sizeUnit:"px",css:c,size:70,color:"#61aceb",loading:this.state.loading})),o.a.createElement("div",{className:"".concat(it.a.recentReviews)},n||void 0!==a&&0!=a.length?o.a.createElement("div",null,a.map(function(t,a){return o.a.createElement("div",{key:a},o.a.createElement("div",{className:"".concat(it.a.reviewWell)},o.a.createElement(et,{toggleCommentModal:e.toggleCommentModal,authUsername:r,authUid:s,authAvatar:i,review:t})))})):o.a.createElement("div",{className:"".concat(it.a.reviewWell)},"No Recent Reviews.")),o.a.createElement(Xe,{show:this.state.commentModal.isOpen,toggleCommentModal:this.toggleCommentModal,commentModal:this.state.commentModal},"Add a comment"))}}]),t}(o.a.Component);lt.contextType=g;var ut=N()(lt),mt=a(63),dt=a.n(mt);a.p;var pt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleCommentModal=function(e,t,n,o,r){var s=Object(oe.a)({},a.state.commentModal);s.bobaShop=e,s.uid=t,s.contextUid=n,s.contextUsername=o,s.contextAvatar=r,s.isOpen=!s.isOpen,a.setState({commentModal:s})},a.getAutosuggestInput=function(e){},a.getAutoSuggestSelected=function(e){a.getShopReviews(e)},a.getShopReviews=function(e){a.props.firebase.bobaShopUserReviews(e).on("value",function(t){var n=t.val();if(n){var o=Object.keys(n).map(function(e){return Object(oe.a)({userid:e},n[e])});a.setState({numberOfReviews:o.length,shop:e},function(){a.sortReviews(o)})}else a.setState({numberOfReviews:0,shop:e,reviews:[]})})},a.sortReviews=function(e){var t=[],n=function(n){var o=Object(oe.a)({},e[n],{bobaShop:a.state.shop});o.comments&&(o.comments=Object.keys(o.comments).map(function(e){return Object(oe.a)({},o.comments[e])}),o.comments.sort(function(e,t){return new Date(e.dateTime)-new Date(t.dateTime)})),t.push(o)};for(var o in e)n(o);t.sort(function(e,t){return new Date(t.dateTime)-new Date(e.dateTime)}),a.setState({reviews:t})},a.state={shop:"",reviews:[],numberOfReviews:0,contextUid:"",contextUsername:"",contextAvatar:"",commentModal:{bobaShop:"",uid:"",contextUid:"",contextUsername:"",contextAvatar:"",isOpen:!1}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(null!=this.context.authUser&&this.setState({contextUid:this.context.authUser.uid,contextUsername:this.context.username,contextAvatar:this.context.avatar}),this.props.location.state){var e=this.props.location.state.shop;this.getShopReviews(e)}}},{key:"componentWillUnmount",value:function(){this.props.firebase.bobaShopUserReviews().off(),this.setState({contextUid:"",contextUsername:"",contextAvatar:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.shop,n=t.reviews,r=t.numberOfReviews,s=t.contextUsername,i=t.contextUid,c=t.contextAvatar;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 ".concat(dt.a.header)},o.a.createElement("h4",null,"Shops"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 ".concat(dt.a.header)},o.a.createElement(Te,{getInputData:this.getAutosuggestInput,getSelectedData:this.getAutoSuggestSelected,bobaShop:a}))),o.a.createElement("div",null,void 0===n||0==n.length?o.a.createElement("div",null,o.a.createElement("div",null)):o.a.createElement("div",{style:{marginTop:"10px"}},o.a.createElement("h4",{className:"".concat(dt.a.info),style:{display:"inline"}},a),o.a.createElement("h4",{className:"".concat(dt.a.info),style:{display:"inline-block"}},o.a.createElement(L.a,{icon:T.f,size:"1x",style:{verticalAlign:"middle"}})," "," "," ",r," "," ",o.a.createElement(X.a,{to:{pathname:"/photos",state:{shop:a}},style:{paddingLeft:"20px"}},o.a.createElement("button",{className:"btn btn-primary ".concat(dt.a.imageIcon)},o.a.createElement(L.a,{icon:T.d,size:"2x"})))),o.a.createElement("ul",null,n.map(function(t){return o.a.createElement("li",{key:t.userid,className:"".concat(dt.a.well)},o.a.createElement(et,{toggleCommentModal:e.toggleCommentModal,authUsername:s,authUid:i,authAvatar:c,review:t}))})))),o.a.createElement(Xe,{show:this.state.commentModal.isOpen,toggleCommentModal:this.toggleCommentModal,commentModal:this.state.commentModal},"Add a comment"))}}]),t}(o.a.Component);pt.contextType=g;var ht=b(pt),ft=a(85),gt=a.n(ft),vt=(a(475),[]),bt=function(e){var t=e.trim().toLowerCase(),a=t.length;return console.log(e),0===a?vt:vt.filter(function(e){return e.username.toLowerCase().slice(0,a)===t})},Et=function(e){return e.username},wt=function(e){return o.a.createElement("div",null,e.username)},St=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n=t.newValue;a.setState({value:n}),a.props.getInputData(n)},a.onSuggestionsFetchRequested=function(e){var t=e.value;console.log(t),a.setState({suggestions:bt(t)})},a.onSuggestionSelected=function(e,t){var n=t.suggestion;t.suggestionValue,t.suggestionIndex,t.sectionIndex,t.method;a.props.getSelectedData(n)},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.state={value:a.props.user,suggestions:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.firebase.users().on("value",function(e){var t=e.val();if(t){var a=Object.keys(t).map(function(e){return Object(oe.a)({userid:e},t[e])});vt=a}})}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.user})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n={placeholder:"Enter member name",value:t,onChange:this.onChange};return o.a.createElement(Ie.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:Et,renderSuggestion:wt,inputProps:n,highlightFirstSuggestion:!0,alwaysRenderSuggestions:!0,focusInputOnSuggestionClick:!1})}}]),t}(o.a.Component),xt=b(St);o.a.createElement("linearGradient",{id:"8dd6f013-f11b-441a-9800-0d03dc0740bb",x1:638.55,y1:280.25,x2:916.88,y2:280.25,gradientUnits:"userSpaceOnUse"},o.a.createElement("stop",{offset:0,stopColor:"gray",stopOpacity:.25}),o.a.createElement("stop",{offset:.54,stopColor:"gray",stopOpacity:.12}),o.a.createElement("stop",{offset:1,stopColor:"gray",stopOpacity:.1})),o.a.createElement("linearGradient",{id:"e927a054-4c7d-4a3b-bb46-bc5c1d4b184d",x1:192.89,y1:798.89,x2:192.89,y2:305.98,xlinkHref:"#8dd6f013-f11b-441a-9800-0d03dc0740bb"}),o.a.createElement("linearGradient",{id:"e3491b7b-890d-4a85-a806-3cf3d862c8a7",x1:1815.14,y1:810.44,x2:1815.14,y2:409.29,gradientTransform:"matrix(-1, 0, 0, 1, 2848.16, 0)",xlinkHref:"#8dd6f013-f11b-441a-9800-0d03dc0740bb"}),o.a.createElement("path",{d:"M1030.53,654.45l-23.81-81.35c-21.83-31.75-43.65-26.79-43.65-26.79-12.9-7.93-21.83-52.58-21.83-52.58-4-48.61-93.26-47.62-93.26-47.62L841,434.2c-8.79-1.75-18.79-1.86-28.83-1,2.4.24,4.74.58,7,1l6.94,11.91s89.29-1,93.26,47.62c0,0,8.93,44.65,21.83,52.58,0,0,21.83-5,43.65,26.79l23.81,81.35s62.51,58.54,43.66,112.11c0,0-12.73,18.11-65.68,20.3,71.38,2.62,87.5-20.3,87.5-20.3C1093,713,1030.53,654.45,1030.53,654.45Z",transform:"translate(-37.41 -50.3)"}),o.a.createElement("path",{d:"M681.3,762.6a463.78,463.78,0,0,1-63.56,6.88c24.85.95,50.71-1.73,67.37-4C683.83,764.53,682.55,763.58,681.3,762.6Z",transform:"translate(-37.41 -50.3)"}),o.a.createElement("path",{d:"M895.6,778.47a407.83,407.83,0,0,1-93.68,14.81c45.73,1.66,89.05-7.87,106.91-12.46C904.54,780.11,900.14,779.33,895.6,778.47Z",transform:"translate(-37.41 -50.3)"}),o.a.createElement("path",{d:"M904.51,141.61a2.25,2.25,0,0,1,.39-1c.17-.24.39-.45.58-.67a3.33,3.33,0,0,1-.61,1.27C904.76,141.34,904.63,141.48,904.51,141.61Z",transform:"translate(-37.41 -50.3)"}),o.a.createElement("path",{d:"M863.68,125.35a2.61,2.61,0,0,1,.17-.28,8.47,8.47,0,0,0-.56,3.38,5.11,5.11,0,0,0,.56,2.27,6.21,6.21,0,0,0,1.46,1.65,20.29,20.29,0,0,0,7.6,4.1,7,7,0,0,1,3.12,1.38c.61.61.94,1.46,1.55,2.07.88.9,2.24,1.18,3.14,2.06a1.35,1.35,0,0,1,.41.59,2,2,0,0,1,0,.9,4.79,4.79,0,0,0,0,2.13,1.72,1.72,0,0,0,1.5,1.33c.86,0,1.47-.78,2.18-1.26,1-.69,2.4-.74,3.39-1.48a11.5,11.5,0,0,0,1.49-1.62,2.37,2.37,0,0,1,1.91-.92,2.07,2.07,0,0,1,1.35.87,5.79,5.79,0,0,1,.65,4.5,17.32,17.32,0,0,0-.58,4.62c.17,1.55,1.22,3.17,2.77,3.31a2.49,2.49,0,0,0,2-.75c0,.15-.07.31-.11.45a2.52,2.52,0,0,1-2.54,1.66c-1.55-.15-2.61-1.76-2.77-3.31a16.66,16.66,0,0,1,.58-4.63,5.79,5.79,0,0,0-.66-4.5,2.08,2.08,0,0,0-1.34-.87,2.36,2.36,0,0,0-1.92.93,11.39,11.39,0,0,1-1.48,1.62c-1,.74-2.36.79-3.39,1.47-.72.48-1.33,1.28-2.19,1.27a1.75,1.75,0,0,1-1.5-1.33,4.65,4.65,0,0,1,0-2.13,2,2,0,0,0,0-.91,1.48,1.48,0,0,0-.4-.59c-.91-.87-2.26-1.16-3.15-2.05-.6-.62-.93-1.47-1.55-2.07a6.86,6.86,0,0,0-3.12-1.38,20.51,20.51,0,0,1-7.6-4.1,6.37,6.37,0,0,1-1.46-1.65,5.12,5.12,0,0,1-.56-2.28A8.43,8.43,0,0,1,863.68,125.35Z",transform:"translate(-37.41 -50.3)"}),o.a.createElement("path",{d:"M898.56,152a3.16,3.16,0,0,1,1.83-2.06c1.46-.58,3.38-.09,4.5-1.13a2.15,2.15,0,0,1-.57,1.25c-1.11,1.19-3.1.64-4.61,1.24a3.06,3.06,0,0,0-1.18.86Z",transform:"translate(-37.41 -50.3)"}),o.a.createElement("path",{d:"M860.77,124.22,859,127s-14.41,3.75-13.82,4.76,1.61-.68,3.64,1.77,9.24,6.6,12.8,5.49,17-5.27,16.9-6.54S860.77,124.22,860.77,124.22Z",transform:"translate(-37.41 -50.3)"}),o.a.createElement("path",{d:"M885.47,106.87c-4.65-.83-20-2-26.46,16.76V127l18.61,6s24.48,6.48,26.5,0a21.79,21.79,0,0,0,.89-6.06,20.09,20.09,0,0,0-7.66-16.36,15.7,15.7,0,0,0-9.06-3.4A19.11,19.11,0,0,1,885.47,106.87Z",transform:"translate(-37.41 -50.3)"}),a.p;var Ot=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleCommentModal=function(e,t,n,o,r){console.log(e,t,n,o,r);var s=Object(oe.a)({},a.state.commentModal);s.bobaShop=e,s.uid=t,s.contextUid=n,s.contextUsername=o,s.contextAvatar=r,s.isOpen=!s.isOpen,a.setState({commentModal:s})},a.getAutosuggestInput=function(e){},a.getAutoSuggestSelected=function(e){a.getUserReviews(e.userid,e.username)},a.getUserReviews=function(e,t){a.props.firebase.userReviews(e).on("value",function(n){var o=n.val();if(o){var r=Object.keys(o).map(function(t){return Object(oe.a)({bobaShop:t,userid:e},o[t])});a.setState({numberOfReviews:r.length,user:t},function(){a.sortReviews(r)})}else a.setState({numberOfReviews:0,user:t,reviews:[]})})},a.sortReviews=function(e){var t=[],n=function(a){var n=Object(oe.a)({},e[a]);n.comments&&(n.comments=Object.keys(n.comments).map(function(e){return Object(oe.a)({},n.comments[e])}),n.comments.sort(function(e,t){return new Date(e.dateTime)-new Date(t.dateTime)})),t.push(n)};for(var o in e)n(o);t.sort(function(e,t){return new Date(t.dateTime)-new Date(e.dateTime)}),a.setState({reviews:t})},a.state={user:"",avatar:"",reviews:[],numberOfReviews:0,contextUid:"",contextUsername:"",contextAvatar:"",commentModal:{bobaShop:"",uid:"",contextUid:"",contextUsername:"",contextAvatar:"",isOpen:!1}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(null!=this.context.authUser&&this.setState({contextUid:this.context.authUser.uid,contextUsername:this.context.username,contextAvatar:this.context.avatar}),this.props.location.state){var e=this.props.location.state.userid,t=this.props.location.state.username;this.getUserReviews(e,t)}}},{key:"componentWillUnmount",value:function(){this.props.firebase.userReviews().off(),this.setState({contextUid:"",contextUsername:"",contextAvatar:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.reviews,r=t.numberOfReviews,s=t.contextUid,i=t.contextUsername,c=t.contextAvatar;return console.log(c),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 ".concat(gt.a.header)},o.a.createElement("h4",null,"Members"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 ".concat(gt.a.header)},o.a.createElement(xt,{getInputData:this.getAutosuggestInput,getSelectedData:this.getAutoSuggestSelected,user:a}))),o.a.createElement("div",null,void 0===n||0==n.length?o.a.createElement("div",null,o.a.createElement("div",null)):o.a.createElement("div",null,o.a.createElement("h4",{className:"".concat(gt.a.info)},a,"  ",o.a.createElement(L.a,{icon:T.b,size:"1x"})," ",r),o.a.createElement("ul",null,n.map(function(t){return o.a.createElement("li",{key:t.bobaShop,className:"".concat(gt.a.well)},o.a.createElement(et,{toggleCommentModal:e.toggleCommentModal,authUsername:i,authUid:s,authAvatar:c,review:t}))})))),o.a.createElement(Xe,{show:this.state.commentModal.isOpen,toggleCommentModal:this.toggleCommentModal,commentModal:this.state.commentModal},"Add a comment"))}}]),t}(o.a.Component);Ot.contextType=g;var _t=b(Ot),Ct=a(21),yt=a.n(Ct),jt=(a(158),a(135)),kt=a.n(jt),Ut=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleContainerClick=function(e){a.node.contains(e.target)||a.props.toggleModal()},a.onChange=function(e){a.setState(Object(ne.a)({},e.target.name,e.target.value))},a.handleUploadStart=function(){return a.setState({isUploading:!0})},a.handleUploadError=function(e){a.setState({isUploading:!1,error:e})},a.onUploadSuccess=function(e,t){a.setState({isUploading:!1,description:""}),a.props.handleUploadSuccess(e,t)},a.node=o.a.createRef(),a.state={description:"",isUploading:!1,error:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=this.state,a=t.description,n=t.isUploading,r=t.error,s=""===a;return o.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.1)",padding:50},onClick:this.handleContainerClick},o.a.createElement("div",{style:{backgroundColor:"white",borderRadius:5,maxWidth:540,minHeight:300,margin:"10% auto",padding:30},ref:function(t){return e.node=t}},o.a.createElement("button",{type:"button",className:"close",onClick:this.props.toggleModal,"aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7")),o.a.createElement("div",{style:{marginTop:"40px"}},o.a.createElement("input",{autoFocus:!0,onChange:this.onChange,name:"description",className:"form-control",placeholder:"Enter description first"}),o.a.createElement("div",{className:"".concat(yt.a.uploadBtns)},o.a.createElement(kt.a,{accept:"image/*",randomizeFilename:!0,storageRef:this.props.firebase.storageBobaShopImages(this.props.shop),onUploadSuccess:function(t){return e.onUploadSuccess(t,a)},onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,className:"btn btn-info ".concat(yt.a.uploadBtn),disabled:s},"Select & Submit"))),o.a.createElement("div",{style:{display:"block"}},n?o.a.createElement("div",null,"Uploading..."):o.a.createElement("div",null)),o.a.createElement("div",{style:{display:"block"}},r?o.a.createElement("div",null,r):o.a.createElement("div",null))))}}]),t}(o.a.Component),Rt=b(Ut),It=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleContainerClick=function(e){a.node.contains(e.target)||a.props.toggleImage()},a.node=o.a.createRef(),a.state={backdropDiv:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.show)return null;return o.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.7)",padding:50,zIndex:1,overflow:"auto"},onClick:this.handleContainerClick},o.a.createElement("div",{style:{padding:30,zIndex:100},ref:function(t){return e.node=t}},o.a.createElement("div",{className:"".concat(yt.a.outer)},o.a.createElement("div",{className:"".concat(yt.a.inner)},o.a.createElement("img",{src:this.props.imageInfo.url,className:"".concat(yt.a.largeImage)}),o.a.createElement("div",{className:"".concat(yt.a.imageDescriptionArea)},o.a.createElement("p",null,this.props.imageInfo.description),o.a.createElement("br",null),o.a.createElement("div",{className:"".concat(yt.a.imageInfoWell)},o.a.createElement("img",{src:this.props.imageInfo.avatar,className:yt.a.avatar}),o.a.createElement("p",{className:"".concat(yt.a.imageInfoText)},this.props.imageInfo.username," ",this.props.imageInfo.dateTime)),this.props.imageInfo.uid==this.props.contextUid?o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.deleteImage(e.props.imageInfo.id,e.props.imageInfo.filename)}},"Delete")):o.a.createElement("div",null))))))}}]),t}(o.a.Component),Nt=b(It);o.a.createElement("linearGradient",{id:"162af490-344a-43d2-868f-e2d375e78928",x1:425.06,y1:600.05,x2:425.06,y2:128.87,gradientUnits:"userSpaceOnUse"},o.a.createElement("stop",{offset:0,stopColor:"gray",stopOpacity:.25}),o.a.createElement("stop",{offset:.54,stopColor:"gray",stopOpacity:.12}),o.a.createElement("stop",{offset:1,stopColor:"gray",stopOpacity:.1})),o.a.createElement("linearGradient",{id:"cd333915-18a2-41bb-84e7-969423cc6509",x1:258.38,y1:294.87,x2:258.38,y2:252.24,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"3bc77771-41d7-4cfb-a8ab-2b296e6cb456",x1:659.41,y1:203.43,x2:659.41,y2:169.83,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"89202326-e19a-43be-8be7-b4f2bb732d86",x1:345.38,y1:208.38,x2:345.38,y2:161.13,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"43906a67-8705-4c83-b97d-76216b252165",x1:483.32,y1:183.35,x2:483.32,y2:142.38,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"261008f7-0041-41fb-b56a-8539a53b2afe",x1:708.87,y1:119.9,x2:748.2,y2:119.9,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"ab0efae6-0bd2-4a14-9ba9-bd41b41698aa",x1:964.11,y1:297.58,x2:964.11,y2:98.89,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"94d1e193-2c6b-46d4-b37d-7a903e0b29da",x1:463.31,y1:448,x2:463.31,y2:277.64,gradientTransform:"translate(8.03 217.52)",xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"3a29d9b6-8e61-4496-a6b5-5d679eb163f7",x1:661.99,y1:448.69,x2:661.99,y2:278.33,gradientTransform:"translate(8.03 216.83)",xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"b72660a5-d964-4b97-8da5-9d342e2aedd1",x1:860.68,y1:449.38,x2:860.68,y2:279.02,gradientTransform:"translate(8.03 216.15)",xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"3a01118b-2985-4be0-b440-2f096e175d1e",x1:463.33,y1:240.45,x2:463.33,y2:70.09,gradientTransform:"translate(7.31 217.52)",xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"709a1cf8-cfb3-4f81-afc1-9e781697792d",x1:859.34,y1:238.27,x2:859.34,y2:67.91,gradientTransform:"translate(7.3 216.15)",xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"7d15d707-8f67-4e66-8d49-1c2771fce49c",x1:661.68,y1:239.65,x2:661.68,y2:69.29,gradientTransform:"translate(7.31 216.84)",xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"bc3ac81e-e376-4546-b1a7-de8dd566bde2",x1:431.12,y1:727.86,x2:431.12,y2:429.15,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"54f2380e-aa08-4cab-b2db-70f5d4ca6305",x1:296.27,y1:470.97,x2:296.27,y2:446.14,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"6a27cddf-db9d-4050-9f4d-1fd9e794acb5",x1:543.51,y1:470.97,x2:543.51,y2:446.14,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"60689c16-abac-4c9a-af50-67b87b3c402d",x1:432.11,y1:661.16,x2:432.11,y2:495.04,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("linearGradient",{id:"20aac6d0-8ce9-4ca1-bfa8-28c9e4d79ce9",x1:432.11,y1:637.09,x2:432.11,y2:519.1,xlinkHref:"#162af490-344a-43d2-868f-e2d375e78928"}),o.a.createElement("path",{d:"M949.44,231.57a131.26,131.26,0,0,0,13.88.92,130.82,130.82,0,0,1-13.78-.59Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),o.a.createElement("path",{d:"M946.34,213.24c13.87-.35,39.27-5.15,39.27-5.15a5.29,5.29,0,0,1,.54.43C978.91,209.82,957,213.57,946.34,213.24Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),o.a.createElement("path",{d:"M938.64,212.61c-6,1.21-7.92,10.19-4.08,15.25,3.51,4.65,7.78,53,7.78,53h-2.91s-4.26-48.35-7.78-53C927.26,222.06,930.35,211.12,938.64,212.61Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),o.a.createElement("path",{d:"M991.3,103.54a8.57,8.57,0,0,0-6.54-1.79,22.9,22.9,0,0,0-6.59,2.1,19.49,19.49,0,0,0-2,.94,11.83,11.83,0,0,0-4.77-1,24,24,0,0,0-7.79,1.83l-8.6,3c-1.9.67-3.89,1.41-5.32,3.21a7.09,7.09,0,0,0-1.3,3,7.2,7.2,0,0,1,1.3-5.59c1.42-1.8,3.41-2.54,5.32-3.21l8.6-3a24,24,0,0,1,7.79-1.83,11.83,11.83,0,0,1,4.77,1,19.49,19.49,0,0,1,2-.94,22.9,22.9,0,0,1,6.59-2.1A8.57,8.57,0,0,1,991.3,101a11.79,11.79,0,0,1,3.76,8.43,13.47,13.47,0,0,1-.07,1.83A11.59,11.59,0,0,0,991.3,103.54Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),o.a.createElement("path",{d:"M987.38,123.5c0,.34,0,.68,0,1,0-.33,0-.67-.05-1Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),o.a.createElement("path",{d:"M960.54,213.24c13.87-.35,39.27-5.15,39.27-5.15a5.29,5.29,0,0,1,.54.43C993.11,209.82,971.16,213.57,960.54,213.24Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),o.a.createElement("path",{d:"M952.89,212.62c-6.09,1.22-8,10.27-3.44,14.25,5.33,4.69,7.1,54,7.1,54h-2.91s-1.78-49.3-7.1-54C941.36,222.31,944.56,211.11,952.89,212.62Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),o.a.createElement("path",{d:"M963.65,231.57a131.25,131.25,0,0,0,13.88.92,130.82,130.82,0,0,1-13.78-.59Z",transform:"translate(-244.61 -98.89)",fill:"#fff"}),a.p;function Mt(){var e=Object(Q.a)(["\n        display: block;\n        margin: 20px auto;\n        "]);return Mt=function(){return e},e}var At=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleModal=function(){a.setState({modalIsOpen:!a.state.modalIsOpen})},a.toggleImage=function(e){e=e||{},a.setState({imageIsOpen:!a.state.imageIsOpen,imageInfo:e})},a.getAutosuggestInput=function(e){},a.getAutoSuggestSelected=function(e){a.getShopImages(e)},a.getShopImages=function(e){a.setState({shop:e,loading:!0}),a.props.firebase.bobaShopImages(e).on("value",function(e){var t=e.val();if(t){var n=Object.keys(t).map(function(e){return Object(oe.a)({id:e},t[e])});a.setState({images:n,loading:!1})}else a.setState({images:[],loading:!1})})},a.getAllImages=function(){return a.props.firebase.images().once("value").then(function(e){var t=e.val();if(t){var a=Object.keys(t).map(function(e){return Object(oe.a)({id:e},t[e])});return console.log(a),a}return null})},a.handleUploadSuccess=function(e,t){a.toggleModal();var n=a.state,o=n.shop,r=n.contextUid,s=n.contextUsername,i=n.contextAvatar,c=(new Date).toLocaleString();a.props.firebase.storageBobaShopImages(o).child(e).getDownloadURL().then(function(n){var l=a.props.firebase.images().push({shop:o,uid:r,username:s,avatar:i,filename:e,url:n,description:t,dateTime:c}).key;a.props.firebase.bobaShopImage(o,l).update({filename:e,url:n,uid:r,username:s,avatar:i,description:t,dateTime:c}),a.props.firebase.userImage(r,l).push({shop:o,filename:e,url:n,description:t,dateTime:c})})},a.deleteImage=function(e,t){if(window.confirm("Are you sure you want to delete?")){var n=a.state,o=n.shop,r=n.contextUid;a.props.firebase.storageBobaShopImage(o,t).delete().then(function(){a.props.firebase.bobaShopImages(o).child(e).remove(),a.props.firebase.userImages(r).child(e).remove(),a.props.firebase.images().child(e).remove(),a.toggleImage()}).catch(function(e){alert(e)})}},a.state={loading:!0,images:[],modalIsOpen:!1,shop:"",contextUid:"",contextUsername:"",contextAvatar:"",imageInfo:{},imageIsOpen:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(null!=this.context.authUser&&this.setState({contextUid:this.context.authUser.uid,contextUsername:this.context.username,contextAvatar:this.context.avatar}),this.props.location.state){var t=this.props.location.state.shop;this.getShopImages(t)}else this.getAllImages().then(function(t){t&&e.setState({images:t,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.bobaShopImages().off()}},{key:"render",value:function(){var e=this,t=this.state,a=t.shop,n=t.contextUid,r=t.images;console.log(555,r);var s=[],i=!0,c=!1,l=void 0;try{for(var u,m=function(){var t=u.value,a=(p=Object(M.a)(t,2))[0],n=p[1];s.push(o.a.createElement("div",{key:a,className:"col-4 col-sm-3 col-lg-2 ".concat(yt.a.column)},o.a.createElement("img",{className:"".concat(yt.a.image),src:n.url,onClick:function(){return e.toggleImage(n)}}))),console.log(n.url)},d=r.entries()[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var p;m()}}catch(f){c=!0,l=f}finally{try{i||null==d.return||d.return()}finally{if(c)throw l}}var h=Object($.css)(Mt());return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 ".concat(yt.a.header)},o.a.createElement("h4",null,"Photos"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 ".concat(yt.a.header)},o.a.createElement(Te,{getInputData:this.getAutosuggestInput,getSelectedData:this.getAutoSuggestSelected,bobaShop:a,placeholder:"Select a shop to add photos"}))),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("div",{className:"".concat(yt.a.info)},o.a.createElement("h5",null,a),n&&a?o.a.createElement("button",{className:"btn btn-primary ".concat(yt.a.addCommentButton)},o.a.createElement(L.a,{icon:T.a,onClick:this.toggleModal,size:"2x"})):o.a.createElement("div",null)),o.a.createElement("div",null,this.state.loading||void 0!==r&&0!=r.length?o.a.createElement("div",{className:"row"},s):o.a.createElement("div",{className:"row ".concat(yt.a.noPhotosWell)},"No Photos Added"),o.a.createElement("div",{className:"sweet-loading"},o.a.createElement(Y.ClipLoader,{sizeUnit:"px",css:h,size:70,color:"#61aceb",loading:this.state.loading}))))),o.a.createElement(Rt,{show:this.state.modalIsOpen,toggleModal:this.toggleModal,shop:a,handleUploadSuccess:this.handleUploadSuccess}),o.a.createElement(Nt,{show:this.state.imageIsOpen,imageInfo:this.state.imageInfo,contextUid:n,toggleImage:this.toggleImage,deleteImage:this.deleteImage}))}}]),t}(o.a.Component);At.contextType=g;var Dt=b(At),Lt=(a(483),{passwordOne:"",passwordTwo:"",error:null}),Tt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.doPasswordUpdate(t).then(function(){a.setState(Object(oe.a)({},Lt))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(ne.a)({},e.target.name,e.target.value))},a.state=Object(oe.a)({},Lt),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,r=t!==a||""===t;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("input",{name:"passwordOne",value:t,onChange:this.onChange,type:"password",placeholder:"New Password"}),o.a.createElement("input",{name:"passwordTwo",value:a,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),o.a.createElement("button",{disabled:r,type:"submit"},"Reset My Password"),n&&o.a.createElement("p",null,n.message))}}]),t}(n.Component),Wt=(b(Tt),{margin:"15px"}),Bt=I(function(e){return!!e})(function(){return o.a.createElement(g.Consumer,null,function(e){return o.a.createElement("div",{style:Wt},o.a.createElement("h5",null,"Account: ",e.authUser.email),o.a.createElement(Ee,null))})}),Ht=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,users:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",function(t){var a=t.val(),n=Object.keys(a).map(function(e){return Object(oe.a)({},a[e],{uid:e})});e.setState({users:n,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.loading;return o.a.createElement("div",null,a&&o.a.createElement("div",null,"Loading..."),o.a.createElement(Pt,{users:t}))}}]),t}(n.Component),Pt=function(e){var t=e.users;return o.a.createElement("ul",null,t.map(function(e){return o.a.createElement("li",{key:e.uid},o.a.createElement("strong",null,"E-Mail:")," ",e.email,o.a.createElement("strong",null," Username:")," ",e.username)}))},zt=Object(R.a)(I(function(e){return!!e}),b)(Ht),Ft=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",avatar:"",isUploading:!1,progress:0,avatarURL:"",files:""},a.handleChangeUsername=function(e){return a.setState({username:e.target.value})},a.handleUploadStart=function(){return a.setState({isUploading:!0,progress:0})},a.handleProgress=function(e){return a.setState({progress:e})},a.handleUploadError=function(e){a.setState({isUploading:!1}),console.error(e)},a.handleUploadSuccess=function(e){a.props.firebase.storageBobaShopImages("Ding Tea (Rowland Heights)").child(e).getDownloadURL().then(function(e){return a.setState({avatarURL:e})})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",null,o.a.createElement("label",null,"Username:"),o.a.createElement("input",{type:"text",value:this.state.username,name:"username",onChange:this.handleChangeUsername}),o.a.createElement("label",null,"Avatar:"),this.state.isUploading&&o.a.createElement("p",null,"Progress: ",this.state.progress),this.state.avatarURL&&o.a.createElement("img",{src:this.state.avatarURL}),o.a.createElement("img",{src:this.state.files}),o.a.createElement(kt.a,{accept:"image/*",name:"avatar",randomizeFilename:!0,storageRef:this.props.firebase.storageBobaShopImages("Ding Tea (Rowland Heights)"),onUploadSuccess:this.handleUploadSuccess,style:{backgroundColor:"steelblue",color:"white",padding:10,borderRadius:4}},"Select"),o.a.createElement("button",{onClick:this.startUploadManually},"Upload all the things")))}}]),t}(n.Component),Vt=b(Ft),Gt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={newReviewsCount:0,reviewsLastVisit:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(d.a,null,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(Z,{forwardRef:function(t){return e.node=t},newReviewsCount:this.state.newReviewsCount}),o.a.createElement("hr",null)),o.a.createElement("div",{className:f.a.main,onClick:this.handleContainerClick},o.a.createElement(p.a,{exact:!0,path:"/",component:ae}),o.a.createElement(p.a,{exact:!0,path:"/signup",component:pe}),o.a.createElement(p.a,{exact:!0,path:"/signin",component:je}),o.a.createElement(p.a,{exact:!0,path:_,component:rt}),o.a.createElement(p.a,{exact:!0,path:"/reviews",render:ut}),o.a.createElement(p.a,{exact:!0,path:C,component:ht}),o.a.createElement(p.a,{exact:!0,path:"/members",component:_t}),o.a.createElement(p.a,{exact:!0,path:"/photos",component:Dt}),o.a.createElement(p.a,{exact:!0,path:"/account",component:Bt}),o.a.createElement(p.a,{exact:!0,path:"/admin",component:zt}),o.a.createElement(p.a,{exact:!0,path:"/test",component:Vt}),o.a.createElement(p.a,{exact:!0,path:"/pw-forget",component:be}))))}}]),t}(o.a.Component);Gt.contextType=g;var qt=k(Gt);a(485);s.a.render(o.a.createElement(E.Provider,{value:new j},o.a.createElement(qt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,a){e.exports={tierList:"landing_tierList__2UTR9",tierLabel:"landing_tierLabel__36JB8",row:"landing_row__1WYyi",tierItem:"landing_tierItem__1KckL",header:"landing_header__2LKQt",image:"landing_image___XgUE"}},84:function(e,t,a){e.exports={inputStyle:"signUp_inputStyle__3aXXX",maskButton:"signUp_maskButton__tFO9j",error:"signUp_error__2e5zt"}},85:function(e,t,a){e.exports={header:"users_header__1aIrD",info:"users_info__6UoBD",svg:"users_svg__2KXmJ"}}},[[312,2,1]]]);
//# sourceMappingURL=main.6ccf68ea.chunk.js.map